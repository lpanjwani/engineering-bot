services:
  smart-bot:
    container_name: smart_bot
    build: 
      context: ../../
      dockerfile: docker/dev/Dockerfile
    depends_on:
      - 'chroma'
      - 'ollama'
    env_file: ../../.env
    networks:
      - smart_bot_network
    environment:
      - CHROMA_HOST=chroma
      - OLLAMA_API_BASE_URL=http://ollama:11434
      - LLM_MODEL=codellama


  ollama:
    container_name: ollama
    image: ollama/ollama:latest
    volumes:
      - ollama-storage:/root/.ollama
    networks:
      - smart_bot_network


  chroma:
    container_name: chroma
    image: ghcr.io/chroma-core/chroma:latest
    volumes:
      - chroma-storage:/index_data
    networks:
      - smart_bot_network


volumes:
  ollama-storage:
  chroma-storage:

networks:
  smart_bot_network:
    name: smart_bot_network
